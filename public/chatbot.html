<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistente de Seguran√ßa para Motoboys</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; transition: background-color 0.3s, color 0.3s; }
        #chat-container { border: 1px solid #ccc; height: 300px; overflow-y: scroll; padding: 10px; margin-bottom: 10px; }
        #user-input { width: 70%; padding: 5px; }
        button { padding: 5px 10px; margin: 2px; }
        .quick-replies { margin-top: 10px; }
        .quick-reply-btn { margin-right: 5px; margin-bottom: 5px; }
        .checklist-item { display: flex; align-items: center; margin-bottom: 5px; }
        .checklist-item input { margin-right: 5px; }
        #score-display { margin-top: 10px; font-weight: bold; }
        #user-profile { margin-bottom: 10px; }
        #daily-tip { margin-bottom: 10px; font-style: italic; }
        #night-mode-toggle { position: absolute; top: 10px; right: 10px; }
        #emergency-button { background-color: red; color: white; font-weight: bold; }
        .achievement { display: inline-block; margin: 5px; padding: 5px; border: 1px solid gold; border-radius: 5px; }
        body.night-mode { background-color: #333; color: #fff; }
        body.night-mode #chat-container { background-color: #222; border-color: #555; }
    </style>
</head>
<body>
    <h1>Assistente de Seguran√ßa para Motoboys üèçÔ∏è</h1>
    <button id="night-mode-toggle" onclick="toggleNightMode()">üåô</button>
    <div id="user-profile"></div>
    <div id="daily-tip"></div>
    <div id="chat-container"></div>
    <input type="text" id="user-input" placeholder="Digite sua pergunta...">
    <button onclick="sendMessage()">Enviar</button>
    <button id="emergency-button" onclick="showEmergencyInfo()">EMERG√äNCIA</button>
    <div class="quick-replies" id="quick-replies"></div>
    <div id="checklist-container"></div>
    <div id="score-display">Pontua√ß√£o de Seguran√ßa: 0</div>
    <div id="achievements"></div>
    <button onclick="showWeatherInfo()">Ver Previs√£o do Tempo</button>

    <script>
        const chatContainer = document.getElementById('chat-container');
        const userInput = document.getElementById('user-input');
        const quickRepliesContainer = document.getElementById('quick-replies');
        const checklistContainer = document.getElementById('checklist-container');
        const scoreDisplay = document.getElementById('score-display');
        const userProfileDiv = document.getElementById('user-profile');
        const dailyTipDiv = document.getElementById('daily-tip');
        const achievementsDiv = document.getElementById('achievements');
        let score = 0;
        let userProfile = { name: '', motoType: '', workRoutine: '' };
        let achievements = [];

        const knowledgeBase = {
            "clima": "üå¶Ô∏è Verifique sempre a previs√£o do tempo antes de sair. Em caso de chuva, redobre a aten√ß√£o e use equipamentos adequados.",
            "equipamento": "ü¶∫ Use sempre capacete, jaqueta de prote√ß√£o, luvas e botas. Certifique-se de que est√£o em bom estado.",
            "manuten√ß√£o": "üîß Fa√ßa a manuten√ß√£o regular da sua moto. Verifique freios, pneus e luzes antes de cada jornada.",
            "tr√¢nsito": "üö¶ Fique atento ao tr√¢nsito, respeite as leis e sinaliza√ß√µes. Mantenha uma dist√¢ncia segura dos outros ve√≠culos.",
            "descanso": "üò¥ Fa√ßa pausas regulares, especialmente em jornadas longas. O descanso √© essencial para manter a aten√ß√£o.",
            "visibilidade": "üëÄ Use roupas e acess√≥rios refletivos para aumentar sua visibilidade, especialmente √† noite.",
            "dire√ß√£o defensiva": "üõ°Ô∏è Pratique a dire√ß√£o defensiva. Antecipe-se √†s a√ß√µes dos outros motoristas e pedestres.",
            "emerg√™ncia": "üö® Em caso de emerg√™ncia, mantenha a calma. Tenha sempre os n√∫meros de emerg√™ncia √† m√£o.",
            "hidrata√ß√£o": "üíß Mantenha-se hidratado, especialmente em dias quentes. Leve sempre √°gua consigo.",
            "planejamento": "üó∫Ô∏è Planeje suas rotas com anteced√™ncia, evitando √°reas conhecidas por serem perigosas ou congestionadas."
        };

        const quickReplies = [
            "Como me preparar para chuva?",
            "Quais equipamentos s√£o essenciais?",
            "Dicas de manuten√ß√£o da moto",
            "Como praticar dire√ß√£o defensiva?"
        ];

        const dailyChecklist = [
            "Verificar pneus",
            "Testar freios",
            "Checar luzes",
            "Usar equipamentos de prote√ß√£o",
            "Verificar previs√£o do tempo"
        ];

        const dailyTips = [
            "Sempre use capacete, mesmo em trajetos curtos.",
            "Mantenha uma dist√¢ncia segura dos ve√≠culos √† sua frente.",
            "Fa√ßa pausas regulares em viagens longas para evitar fadiga.",
            "Verifique a press√£o dos pneus regularmente.",
            "Use roupas de cores vivas ou refletivas para aumentar sua visibilidade.",
            "Evite pontos cegos de outros ve√≠culos.",
            "N√£o use o celular enquanto pilota, nem mesmo com fones de ouvido."
        ];

        function sendMessage() {
            const userMessage = userInput.value;
            if (userMessage.trim() === '') return;

            appendMessage('Voc√™', userMessage);
            const botResponse = getBotResponse(userMessage);
            appendMessage('Assistente', botResponse);

            userInput.value = '';
            updateQuickReplies();
        }

        function appendMessage(sender, message) {
            const messageElement = document.createElement('p');
            messageElement.innerHTML = `<strong>${sender}:</strong> ${message}`;
            chatContainer.appendChild(messageElement);
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function getBotResponse(userMessage) {
            userMessage = userMessage.toLowerCase();
            for (const [keyword, response] of Object.entries(knowledgeBase)) {
                if (userMessage.includes(keyword)) {
                    incrementScore();
                    return response;
                }
            }
            return "Desculpe, n√£o tenho informa√ß√µes espec√≠ficas sobre isso. Para sua seguran√ßa, sempre siga as leis de tr√¢nsito e use equipamentos de prote√ß√£o adequados. üõë";
        }

        function updateQuickReplies() {
            quickRepliesContainer.innerHTML = '';
            quickReplies.forEach(reply => {
                const button = document.createElement('button');
                button.textContent = reply;
                button.classList.add('quick-reply-btn');
                button.onclick = () => {
                    userInput.value = reply;
                    sendMessage();
                };
                quickRepliesContainer.appendChild(button);
            });
        }

        function createChecklist() {
            checklistContainer.innerHTML = '<h3>Checklist Di√°rio de Seguran√ßa:</h3>';
            dailyChecklist.forEach(item => {
                const div = document.createElement('div');
                div.classList.add('checklist-item');
                div.innerHTML = `
                    <input type="checkbox" id="${item}" onchange="updateScore(this)">
                    <label for="${item}">${item}</label>
                `;
                checklistContainer.appendChild(div);
            });
        }

        function updateScore(checkbox) {
            if (checkbox.checked) {
                incrementScore();
            } else {
                decrementScore();
            }
        }

        function incrementScore() {
            score += 10;
            updateScoreDisplay();
            checkAchievements();
        }

        function decrementScore() {
            score = Math.max(0, score - 10);
            updateScoreDisplay();
        }

        function updateScoreDisplay() {
            scoreDisplay.textContent = `Pontua√ß√£o de Seguran√ßa: ${score}`;
        }

        function createUserProfile() {
            userProfile.name = prompt("Qual √© o seu nome?") || "Amigo Motoboy";
            userProfile.motoType = prompt("Qual o tipo da sua moto?") || "N√£o especificado";
            userProfile.workRoutine = prompt("Qual sua rotina de trabalho? (ex: diurno, noturno, misto)") || "N√£o especificado";
            updateUserProfileDisplay();
        }

        function updateUserProfileDisplay() {
            userProfileDiv.innerHTML = `
                <h3>Perfil do Usu√°rio:</h3>
                <p>Nome: ${userProfile.name}</p>
                <p>Tipo de Moto: ${userProfile.motoType}</p>
                <p>Rotina de Trabalho: ${userProfile.workRoutine}</p>
            `;
        }

        function showDailyTip() {
            const tipIndex = Math.floor(Math.random() * dailyTips.length);
            dailyTipDiv.textContent = `Dica do Dia: ${dailyTips[tipIndex]}`;
        }

        function toggleNightMode() {
            document.body.classList.toggle('night-mode');
            const button = document.getElementById('night-mode-toggle');
            button.textContent = document.body.classList.contains('night-mode') ? '‚òÄÔ∏è' : 'üåô';
        }

        function showEmergencyInfo() {
            alert("INFORMA√á√ïES DE EMERG√äNCIA:\n\n" +
                  "- Pol√≠cia: 190\n" +
                  "- Bombeiros: 193\n" +
                  "- SAMU: 192\n" +
                  "- Mantenha a calma\n" +
                  "- Se poss√≠vel, saia da via\n" +
                  "- Ligue a sinaliza√ß√£o de emerg√™ncia\n" +
                  "- Se houver feridos, n√£o os mova, exceto se houver risco imediato");
        }

        function checkAchievements() {
            if (score >= 50 && !achievements.includes("Iniciante Seguro")) {
                achievements.push("Iniciante Seguro");
                showAchievement("Iniciante Seguro");
            }
            if (score >= 100 && !achievements.includes("Mestre da Seguran√ßa")) {
                achievements.push("Mestre da Seguran√ßa");
                showAchievement("Mestre da Seguran√ßa");
            }
        }

        function showAchievement(achievement) {
            const achievementElement = document.createElement('div');
            achievementElement.classList.add('achievement');
            achievementElement.textContent = `üèÜ ${achievement}`;
            achievementsDiv.appendChild(achievementElement);
            alert(`Parab√©ns! Voc√™ desbloqueou a conquista: ${achievement}`);
        }

        function showWeatherInfo() {
            // Simulating weather API call
            const weatherConditions = ["Ensolarado", "Nublado", "Chuvoso", "Ventoso"];
            const randomWeather = weatherConditions[Math.floor(Math.random() * weatherConditions.length)];
            const temperature = Math.floor(Math.random() * 15) + 20; // Random temperature between 20-35¬∞C
            alert(`Previs√£o do tempo para hoje:\nCondi√ß√£o: ${randomWeather}\nTemperatura: ${temperature}¬∞C`);
        }

        // Inicializa√ß√£o
        updateQuickReplies();
        createChecklist();
        createUserProfile();
        showDailyTip();
        appendMessage('Assistente', `Ol√° ${userProfile.name}! Sou seu assistente de seguran√ßa. Como posso ajudar voc√™ hoje? üòä`);

        // Notifica√ß√µes Push (simulado)
        setTimeout(() => {
            if (Notification.permission === "granted") {
                new Notification("Lembrete de Seguran√ßa", {
                    body: "N√£o se esque√ßa de verificar sua moto antes de sair!",
                    icon: "https://example.com/icon.png"
                });
            } else if (Notification.permission !== "denied") {
                Notification.requestPermission().then(permission => {
                    if (permission === "granted") {
                        new Notification("Lembrete de Seguran√ßa", {
                            body: "N√£o se esque√ßa de verificar sua moto antes de sair!",
                            icon: "https://example.com/icon.png"
                        });
                    }
                });
            }
        }, 10000);

        userInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
