<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistente de Segurança para Motoboys</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
        }
        .chat-container {
            width: 100%;
            max-width: 400px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        .chat-header {
            background-color: #4CAF50;
            color: #fff;
            padding: 15px;
            text-align: center;
            font-size: 18px;
        }
        .chat-messages {
            height: 400px;
            overflow-y: auto;
            padding: 15px;
        }
        .message {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
            max-width: 80%;
        }
        .user-message {
            background-color: #E3F2FD;
            align-self: flex-end;
            margin-left: auto;
        }
        .bot-message {
            background-color: #F1F1F1;
        }
        .chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #e0e0e0;
        }
        #user-input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        #send-button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: #fff;
            border: none;
            border-radius: 5px;
            margin-left: 10px;
            cursor: pointer;
        }
        .quick-replies {
            display: flex;
            flex-wrap: wrap;
            padding: 10px;
            gap: 5px;
        }
        .quick-reply {
            background-color: #E3F2FD;
            border: none;
            border-radius: 15px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 14px;
        }
        .score {
            text-align: center;
            padding: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">Assistente de Segurança para Motoboys</div>
        <div class="chat-messages" id="chat-messages"></div>
        <div class="quick-replies" id="quick-replies"></div>
        <div class="chat-input">
            <input type="text" id="user-input" placeholder="Digite sua mensagem...">
            <button id="send-button">Enviar</button>
        </div>
        <div class="score" id="score">Pontuação: 0</div>
    </div>

    <script>
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        const quickReplies = document.getElementById('quick-replies');
        const scoreElement = document.getElementById('score');

        let score = 0;

        const knowledgeBase = {
            "capacete": {
                keywords: ["capacete", "proteção cabeça", "proteção craniana"],
                response: "O uso do capacete é obrigatório e essencial para sua segurança. Ele reduz o risco de lesões graves na cabeça em caso de acidente. Certifique-se de usar um capacete que esteja em boas condições e devidamente ajustado."
            },
            "luvas": {
                keywords: ["luvas", "proteção mãos"],
                response: "Luvas são importantes para proteger suas mãos em caso de queda e melhorar o controle da moto. Elas também ajudam a reduzir a fadiga nas mãos durante longas viagens."
            },
            "jaqueta": {
                keywords: ["jaqueta", "casaco", "blusa"],
                response: "Uma jaqueta adequada protege contra abrasões e intempéries, além de aumentar sua visibilidade no trânsito. Opte por jaquetas com proteções nos cotovelos, ombros e costas."
            },
            "calça": {
                keywords: ["calça", "proteção pernas"],
                response: "Calças resistentes, como as de couro ou com proteção, são fundamentais para proteger suas pernas em caso de acidente. Evite usar shorts ou calças finas durante as entregas."
            },
            "bota": {
                keywords: ["bota", "calçado", "sapato"],
                response: "Botas adequadas protegem seus pés e tornozelos, além de proporcionar melhor aderência aos pedais da moto. Use botas que cubram os tornozelos e tenham sola antiderrapante."
            },
            "manutenção": {
                keywords: ["manutenção", "revisão", "cuidados moto"],
                response: "Realizar manutenção regular na sua moto é crucial para evitar problemas mecânicos e acidentes. Verifique regularmente os freios, pneus, luzes e óleo. Uma moto bem cuidada é mais segura e econômica."
            },
            "visibilidade": {
                keywords: ["visibilidade", "ser visto", "refletivo"],
                response: "Use roupas e acessórios refletivos para aumentar sua visibilidade, especialmente à noite. Isso ajuda outros motoristas a te verem com mais facilidade, reduzindo o risco de acidentes."
            },
            "clima": {
                keywords: ["clima", "chuva", "frio", "calor"],
                response: "Esteja preparado para diferentes condições climáticas. Chuva e frio podem afetar sua segurança e desempenho. Use roupas impermeáveis em dias chuvosos e vista-se em camadas em dias frios."
            },
            "trânsito": {
                keywords: ["trânsito", "tráfego", "ruas", "avenidas"],
                response: "Fique atento ao trânsito, respeite as leis e sinalizações, e sempre pilote defensivamente. Mantenha uma distância segura dos outros veículos e esteja preparado para reagir a situações inesperadas."
            },
            "descanso": {
                keywords: ["descanso", "pausa", "descansar", "dormir"],
                response: "Descanse adequadamente entre as entregas. Fadiga pode diminuir seus reflexos e aumentar o risco de acidentes. Faça pausas regulares, hidrate-se e, se necessário, tire um cochilo rápido em um local seguro."
            }
        };

        function getBotResponse(userMessage) {
            userMessage = userMessage.toLowerCase();
            for (const [topic, info] of Object.entries(knowledgeBase)) {
                for (const keyword of info.keywords) {
                    if (userMessage.includes(keyword)) {
                        incrementScore();
                        return info.response;
                    }
                }
            }
            return getContextualResponse(userMessage);
        }

        function getContextualResponse(userMessage) {
            if (userMessage.includes("como") && userMessage.includes("seguro")) {
                return "Para ser um motoboy mais seguro, sempre use equipamentos de proteção, mantenha sua moto em boas condições, respeite as leis de trânsito e fique atento ao seu entorno. Que aspecto específico da segurança você gostaria de saber mais?";
            } else if (userMessage.includes("dica") || userMessage.includes("conselho")) {
                return "Uma dica importante é sempre manter uma distância segura dos outros veículos. Isso te dá mais tempo para reagir a situações inesperadas. Tem alguma situação específica em que você gostaria de dicas?";
            } else if (userMessage.includes("acidente") || userMessage.includes("queda")) {
                return "Acidentes podem acontecer, mas muitos podem ser evitados com precaução. Use sempre equipamentos de proteção, pilote defensivamente e esteja sempre alerta. Você tem alguma preocupação específica sobre prevenção de acidentes?";
            } else if (userMessage.includes("cansaço") || userMessage.includes("sono")) {
                return "O cansaço é um grande risco para motoboys. Faça pausas regulares, hidrate-se bem e, se possível, tire pequenos cochilos em locais seguros. Como você costuma lidar com o cansaço durante o trabalho?";
            } else {
                return "Entendo sua preocupação. A segurança é fundamental para motoboys. Há algum aspecto específico da segurança que você gostaria de discutir? Por exemplo, equipamentos de proteção, manutenção da moto ou dicas de pilotagem segura?";
            }
        }

        function askQuestion() {
            const questions = [
                "Como você lida com o trânsito intenso durante as entregas?",
                "Qual equipamento de segurança você considera mais importante?",
                "Você já enfrentou alguma situação perigosa durante uma entrega? Como lidou com isso?",
                "Quais são suas estratégias para manter-se alerta durante longas jornadas de trabalho?",
                "Como você se prepara para trabalhar em diferentes condições climáticas?"
            ];
            const randomIndex = Math.floor(Math.random() * questions.length);
            appendMessage('Assistente', questions[randomIndex]);
        }

        function sendMessage() {
            const userMessage = userInput.value;
            if (userMessage.trim() === '') return;

            appendMessage('Você', userMessage);
            const botResponse = getBotResponse(userMessage);
            appendMessage('Assistente', botResponse);

            userInput.value = '';
            updateQuickReplies();

            if (Math.random() < 0.3) {  // 30% de chance de fazer uma pergunta
                setTimeout(askQuestion, 1000);
            }
        }

        function appendMessage(sender, message) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', sender === 'Você' ? 'user-message' : 'bot-message');
            messageElement.textContent = `${sender}: ${message}`;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function updateQuickReplies() {
            quickReplies.innerHTML = '';
            const topics = Object.keys(knowledgeBase);
            const randomTopics = topics.sort(() => 0.5 - Math.random()).slice(0, 3);
            randomTopics.forEach(topic => {
                const button = document.createElement('button');
                button.classList.add('quick-reply');
                button.textContent = topic;
                button.addEventListener('click', () => {
                    userInput.value = topic;
                    sendMessage();
                });
                quickReplies.appendChild(button);
            });
        }

        function incrementScore() {
            score += 10;
            scoreElement.textContent = `Pontuação: ${score}`;
        }

        sendButton.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Mensagem inicial do assistente
        appendMessage('Assistente', 'Olá! Sou o assistente de segurança para motoboys. Como posso ajudar você hoje? Tem alguma dúvida sobre equipamentos de proteção, manutenção da moto ou dicas de segurança no trânsito?');
        updateQuickReplies();
    </script>
</body>
</html>
