<!DOCTYPE html>
<html>
<head>
  <title>Chat Motoboys</title>
  <style>
    #chat-container {
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 10px;
      background-color: #f9f9f9;
    }

    #messages {
      height: 300px;
      overflow-y: scroll;
      margin-bottom: 20px;
    }

    #message-input {
      width: calc(100% - 110px);
      padding: 10px;
      margin-right: 10px;
    }

    #send-button, #send-audio-button {
      padding: 10px;
    }
  </style>
</head>
<body>
  <div id="chat-container">
    <div id="messages"></div>
    <input type="text" id="message-input" placeholder="Digite sua mensagem...">
    <button id="send-button">Enviar</button>
    <input type="file" id="audio-input" accept="audio/*">
    <button id="send-audio-button">Enviar √Åudio</button>
  </div>

  <!-- Firebase Configuration -->
  <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-storage.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyB-pF2lRStLTN9Xw9aYQj962qdNFyUXI2E",
      authDomain: "cabana-8d55e.firebaseapp.com",
      databaseURL: "https://cabana-8d55e-default-rtdb.firebaseio.com",
      projectId: "cabana-8d55e",
      storageBucket: "cabana-8d55e.appspot.com",
      messagingSenderId: "706144237954",
      appId: "1:706144237954:web:345c10370972486afc779b",
      measurementId: "G-96Y337GYT8"
    };
    firebase.initializeApp(firebaseConfig);

    const db = firebase.database();
    const storage = firebase.storage();
    const messagesRef = db.ref('messages');

    document.getElementById('send-button').addEventListener('click', () => {
      const message = document.getElementById('message-input').value;
      messagesRef.push({ sender: 'Motoboy', text: message });
      document.getElementById('message-input').value = '';
    });

    document.getElementById('send-audio-button').addEventListener('click', () => {
      const audioFile = document.getElementById('audio-input').files[0];
      const storageRef = storage.ref('audios/' + audioFile.name);
      storageRef.put(audioFile).then(() => {
        storageRef.getDownloadURL().then((url) => {
          messagesRef.push({ sender: 'Motoboy', audio: url });
        });
      });
    });

    messagesRef.on('child_added', (snapshot) => {
      const message = snapshot.val();
      const messageElement = document.createElement('div');
      if (message.text) {
        messageElement.textContent = message.sender + ': ' + message.text;
      } else if (message.audio) {
        const audioElement = document.createElement('audio');
        audioElement.controls = true;
        audioElement.src = message.audio;
        messageElement.appendChild(audioElement);
      }
      document.getElementById('messages').appendChild(messageElement);
    });
  </script>
</body>
</html>
